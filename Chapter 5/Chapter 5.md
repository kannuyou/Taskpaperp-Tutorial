# 第五章：批量操作、自动化与复杂项目

>Simple things should be simple, complex things should be possible.
>——Alan Kay

在之前的文章里，我们已经系统性了解了 TaskPaper 的用法，基础操作想必读者们已经不在话下了。而在工作中，我们往往要面对那些庞大而复杂的项目，需要更灵活的应对方式。

本章将用一个详尽的实例，串起那些零碎但是实用的技巧，让你从容处理大量任务。同时，TaskPaper 客制化的最高峰——ShareSheet 配置文件和脚本也将登场。

----

2016 年我参加了一个视频制作项目，跨度两个多月，其间我还得做兼职填饱肚子、准备艺术学院的考试，可以说是二十几年人生中最忙碌的一段日子。好在我用几份任务清单配合着其他效率工具，协调着完成了绝大多数任务。

我的清单上主要有视频制作、兼职、课程和日常四大项目，其中视频制作涉及的任务最繁重。由于每天和电脑打交道的时间非常久，桌面端表现出色的 TaskPaper 成了最适合我的任务管理工具。

【1-我的任务】

为了协调好工作、学习和生活，我逐渐习惯了用 TaskPaper 来回顾前日、安排当日，把它当做展板（公告栏），时时注意各项任务的进度，把它们及时完成。

## 创建任务展板	

比起被动地接受提醒，我更喜欢主动查看任务。所以在我看来，TaskPaper 是一块「展板」，时不时就要去看一下。而做好这块展板，则是一系列工作的开始。

### 克隆一批相似的任务

在我的列表中，有不少任务写出来大同小异，比如几项 `- 延时摄影取景(三脚架) 某某地点` 中就只有 `某某地点` 不同，如果想创建多个这样的取景任务，可以用比复制粘贴更快的方法：克隆。

此时就犯不着每次重新输入，只要创建第一个任务，将其作为模板进行「克隆」。使用快捷键 `⌘Command+⇧Shift+D` 能够把当前任务克隆出来；如果选中多个任务再使用快捷键，则可以将它们整组克隆。

【2-克隆任务】

这里再讲讲选中任务的键盘操作。的确，你可以用光标选中任务，但是快捷键提供了更精确、干脆的操作。想选中当前任务，就按 `⌘Command+→` 把光标移到任务末尾，再使用 `⌘Command+⇧Shift+←` 选中那一整行任务。

【3-选中任务】

如果想批量选择任务，可以把光标移到行首，按住 `⇧Shift` 的同时，再每按一次 `↓` 或 `↑` 就往下或往上选中一条任务。可惜 KeyCastr 录制这组快捷键时会乱码，这里就没法展示了。

选择文本的快捷键其实来自传统的文本编辑器，而在 TaskPaper 里，一般一行文字就是一条任务，刚好可以借助这些快捷键来选中任务。

### 更快地标注时间

在 TaskPaper 里，我们更倾向于使用 `tomorrow`、`next Mon` 这样口语化的表达。但是我在第二章里就提到，毕竟 TaskPaper 只是在读取纯文本文件，不会自行修改里面的数据，也就没法随着时间推移自动改写相对时间了。

不过借助 Automator+shell，可以只用最少的输入量，快速插入 ISO 8601 格式的日期。我这里有一个做好的 [Automator Service](https://github.com/BlackwinMin/sspai-sample-script/blob/master/插入将来日期.workflow.zip)，下载安装后请为它设置一个快捷键，以便随时调用。

通过自定义快捷键打开它之后，会出现一个输入框，如果我想把任务安排到明天，就填入 `+1d` ，意味「一天后」，之后 Automator Service 会自动运行，插入一段标准格式的日期。同样的，输入 `+1w` 、`+1m` 就可以得到下周、次月的日期。

【4-插入日期】

如果你有购买 [Keyboard Meastro](http://www.keyboardmaestro.com/main/)，那么恭喜你，有人写为 KM 写了一个[脚本](https://forum.keyboardmaestro.com/t/convert-informal-date-times-to-yyyy-mm-dd-hh-mm-in-taskpaper-3-preview/2941)，可以让你直接使用  TaskPaper 内建语法输入相对格式日期，它会负责自动转换至 ISO 8601 格式。

### 优先处理最难的任务

>如果你一早醒来就吃一只活青蛙，那一天里就不会有什么再难的事了。
>——马克吐温

你一定熟知了「两分钟原则」，的确，干掉一件小任务并不难。困难的是那些棘手的任务——对于我来说，最费时费力的就是取景。这些任务就像令人生厌的「活青蛙」，如果大清早就「吃掉」它，相比之下之后遇到的事情就不是什么难事了。

【5-Frog】

于是，取景任务被我标为最高优先级 `@P1`，并通过 StyleSheet 把标签渲染为显眼的红色。如果你更偏爱精力标签，也可以用 `@Focus`。可能你已经注意到我开头用了大写字母，因为在自动补全时大写字母排得更靠前，容易找到它们。

【5-2-P1】

早起干掉取景任务获得的一个惊喜是，我捕捉到了往期制作者没有注意到的晨读、日出、湖光等镜头。

**「吃青蛙」原则最重要作用在于：敦促你完成那些看起来难而一拖再拖的任务。**是的，我今天取景或者明天再行动花的是同样力气，但不趁早完成，日后遇上雨天就糟糕了。

### 重置循环任务的方法

一个时间跨度较大的项目，常常包含了不少需要循环执行的任务，例如每天给相机充足电、每周二和周末开总结会议，没有人乐意反复创建它们。日历是记录这些任务的好地方，但仍然有人更喜欢（比如我）统一在任务管理工具里添加循环任务。

很可惜，TaskPaper 没有提供类似的功能，但可以使用标签组「曲线救国」：**所有需要循环的任务，给时间标签加上 `(ev)` 的备注。**就拿充电来说，可以这样记录它：`- 单反充电 @today(ev)`，表示每一个「今天」——也就是天天——都要充电。类似的，每周五就是 `@Fri(ev)`。

【6-循环任务】

这样设置任务，就可以在完成循环任务后把它们「重置」。打开 serachbar，使用 `@text contains (ev)` 把已经完成的循环任务筛选出来，全选，再按一次 `⌘Command+D`，它们就又回到待执行状态了。

要小心的是 `Archive:` 项目，被它吃掉的任务就不会乖乖回到原有项目列表了。所以我一直在使用 Today searches 汇集今日任务，它可以动态显示符合今日时间条件的任务，而不受项目（列表）的限制。

## 任务展板为工作中心

现代任务管理工具所采用的系统（列表-标签-过滤系统）其实「偷师」自电脑的文件管理方式，TaskPaper、Todoist 无不如此。而 TaskPaper 更具有纯文本文件的优势，这带来的灵活性可以让它成为整个工作的中枢，将待处理的文件、待阅读的文章结合到 TaskPaper 里，统一管理。

我把一个 TaskPaper 窗口称为「展板」，顾名思义，它是一个任务的展示区域；但和挂在墙上的黑板最大不同在于，TaskPaper 里的各种链接都是可点击的，能够直达文件夹、打开文件或者网页，可以让你直接进入任务。

在开始进一步介绍前，我先分享一下自己查看任务的最快方式：把 TaskPaper 窗口放在桌面，这样一来，在任何地方打开 Mission Control 都可以看见任务展板了。

【7-看任务】

### 更便捷地打开文件

大量的素材曾让我头疼，想必制作过视频的读者都有同感；其实不管做什么工作，素材、参考资料一多，就会加重整理和搜索的工作量。

我们用文件夹和颜色标签把文件整理得整整齐齐，这当然是个好习惯，但它适合归档，不便于频繁的取用——不是去 Finder 里翻找、就是求助不靠谱的 Spotlight[^1]。

其实可以换个思路，选出那些即将用到的文件，**将其路径备注进 TaskPaper 的任务里，等要执行那些任务的时候，点一下路径自然就打开了所需文件**。

【8-打开文件】

前面几章就提到过，直接把文件拖进  TaskPaper 就可以得到可跳转的路径。需要注意的是， **Mac App Store 版本的 TaskPaper 不支持直接打开文件，只能跳转的对应的 Finder 文件夹。**

这个方法和 WorkSpaces 有异曲同工之妙，后者是通过「工程」来管理文件，比如一次剪辑、一次修图就可以视为一个「工程 」，WorkSpaces 会把每个「工程」即将用到的文件汇集在一起，直接通过 Workspaces 打开，不用再去 Finder 里寻找它们。

【9-workspaces】

TaskPaper 则用任务来管理文件，可以说是轻量版的、个人化的 WorkSpaces。

### 多文档管理

简单的任务一份清单就解决，但出于一些需求，我们仍然需要多个文档：

- 避免任务之间相互干扰，例如把工作和学习「断开」
- 某个任务、子任务过于繁重的项目，可以单独拎出来
- 单独存储一年只用几次的任务列表，例如**旅行行李清单**
- ……

【10-Things 3】

著名任务管理工具 [Things 3](https://culturedcode.com/things/whats-new/) 采用了多窗口来显示不同类型的任务，TaskPaper 里的多窗口其实就是打开多个任务文档，我们可以通过快捷键和文件路径让它用起来更高效。

**1. 用 Tab  栏切换任务文件**

在新建了一个的 `后期:` 项目后，我不幸发现它下面每天会产生几十个任务，这就更适合另起一份 taskpaper 文件。

把准备搬家的任务们剪切下来，新建一个 taskpaper 文件，把刚才那些任务添加进去，保存好。之后可以点击**菜单栏-Window-Merge All Windows**，把所有 TaskPaper 窗口合并起来，节约桌面空间。

【11-切换任务文件】

如果需要切换任务文件，最快的当然是可以用 `Control+Tab` 和 `Control+Shift+Tab` 来回切换，这在 macOS 上多数应用里是通用的。可能你更喜欢文件预览的效果，那可以试试快捷键 `⌘Command+⇧Shift+\`（`↩Return` 键上方）打开 Tab 视图，上下滑动来切换。

除了 `⌘Command+N` 新建文件，也可以在 Tab 视图最底端点击加号来新建，或者点击  Tab 栏右侧的加号，依据习惯键盘还是触控板，选一个最趁手的。

**2. 来回跳转 ♻️**

如果各个文档间关系「错综复杂」，比如`取景:`、`后期:` 每个项目里都有一大堆相互关联的任务，这些文档之间的跳转就更适合依靠**相对路径**。它的表示方式是 `./文件名加拓展名`，意味着打开 TaskPaper 文件夹（位于 iCloud）中的另一个文件。

我就把后期相关任务都移到了一个新的 taskpaper 文件里，取名 `后期.taskpaper`（你用 .txt 结尾也是一样的），再回到主任务列表里添加 `./后期.taskpaper` 的路径，就可以直接打开后期相关任务；同样，在「后期」文件里添加 `./Todo.txt`，则可以方便地跳回主任务列表。**这就形成了两个可以相互跳转的任务展板（窗口）。**

【12-多个任务展板】

出于节省屏幕空间的目的，我把几个大小一样的 TaskPaper 窗口叠放在一起，这样就感觉不到自己实际上在用多个文件。至于为什么不用 Tab  栏，因为它也占用了一行空间啊……

【13-重叠任务展板】

### 任务驱动稍后读

和打开文件一样，TaskPaper 也适合拿来记录稍后读文章的链接。

为了能和摄影师协作得更密切，每天我要阅读大量的摄影、摄像基础文章，此外 RSS 阅读器还有一个常年「99+」的小红点等我去消除。读书如抽丝，它们越积越多。这种时候，就适合把**待读文章放进任务列表，添加一些稍后读任务**。第四章中我介绍了链接管理，但稍后读和它侧重不同，后者只需留下一个打开网页的便捷入口，而不用考虑写作方面的格式问题（不必追求 Markdown 格式）。

Todoist 创始人就喜欢把稍后度文章添加进自己的待办事项，他认为这是自己任务管理系统的重要部分：

> 一个效率系统必须能让你掌控你私人和工作上的所有事情。

我还不到他那般事无巨细的程度，但也会像处理任务一样对待文章。在长期使用 Pocket、Instapaper 后，我发现自己容易「Read it Never」；而把阅读当做任务来处理则不容易遗忘，你很可能睡前才想起 Safari 阅读列表里尚有文章，但很难忽视 TaskPaper 这块展板上的任务。

和添加文件路径一样，你也可以通过拖拽把链接放进 TaskPaper，后者会自动将它们变为超链接，点击后能直接在浏览器打开。和多数人想象的不同，我很少设置 `-读文章：《延时摄影技巧》` 这类指向型微弱的任务 ，而是先指出读这篇文章的目的并将其作为任务，下面再以备注形式添加一个链接。

【14-稍后读链接】

我会把链接往右移动一个层级，平时就可以折叠起来节约地方。我备注用得少，基本就链接和文件路径两类，折叠时任务前的小红点可以提醒我：里面还有素材提供给你呐。

这就形成了「任务驱动型」的阅读，几乎读任何文章都是有的放矢（虽然不一定能实现，也可能获得意外的知识）。有些重要的干货文章甚至直接决定了当天能不能完成某个任务，例如，我如果不看《[Rizon，帮你轻松找到摄影的「黄金时间」](https://sspai.com/post/33608)》，那天傍晚取景基本就得靠运气。

### 添加预设标签

有一次我使用优先级标签时遇到 TaskPaper 自动补全功能「失效」的情况，检查任务列表后发现，我已经完成并删掉所有带着该标签的任务，这个标签已经不存在于我的列表，自然也就无法自动补全了。

为了方便以后输入优先级，可以把它添加进 TaskPaper 的标签配置文件。在 `/Users/你的用户名/Library/Application\ Support/TaskPaper/Configurations/tags.taskpaper` 这个路径下，用任意文本编辑器打开 tags.taskpaper 文件，就可以添加预设标签。我还是推荐使用 TaskPaper 来编辑，可以直接看见标签的显示效果。

我在 `include tags:` 项目里添加了 `@P1`、`@P2` 标签，标签之间用空格隔开。保存配置后，在任何一个列表里打上 `@P`，就会出现两档优先级的补全建议了。

【15-tags添加】

同样，你可以把精力标签、合作者标签都加进去，充分发挥自动补全的实力。

### 高亮显示团队成员名

在我的实践中，往往一个任务会涉及多个成员，此时就可以用一个 `@Team()` 标签组配合多个人名备注就能容纳他们，而不必分别输入人名。下面一行就是更简单的写法。

```
- 借用无人机 @Team(陈) @Team(洪) 
- 借用无人机 @Team(陈,洪)
```

注意用**半角逗号** `,` 把各个备注隔开。

简化完输入，我们来着手让人名显示得更明显，和其他标签区别开来。在 `~/Library/Application Support/TaskPaper/StyleSheets/Light.less`  下找到 `.less ` 结尾的StyleSheet 配置文件，用 TaskPaper 打开后在任意一行添加 `run[tag="data-Team"] {color: blue;}` 语句，就可以把所有的成员名字设为蓝色，表示对应任务有了负责人。

如果你足够细致，可以把 `@Team()` 拆成通知人和执行人两部分，分别设置一个颜色，任务分工会更加明确。在制作视频这个复杂项目里，我就用 `@Noti()` 和 `@Do()` 来区分两类相关成员。

【16-人名标签】

### 一些单手使用的技巧

射击游戏高手，往往熟知每组按键所对应的操作，能用它们打得对面的纯鼠标流玩家叫苦不迭。桌面端的任务管理工具也是这样，快捷键操作能显著提升效率。

更近一步，有单手可用的快捷键，何不笑纳。下面列出更适合单手完成的操作：

`右⌘Command+右⌥Option+方向键`：移动层级

`左⌘Command+左⌥Option+S`：展开/收起 sidebar

`右⌘Command+右⇧Shift+\`：展开 Tab  视图

`右⌘Command+P`：打开「Go to anything」界面

当然，只要你觉得舒服，也可以在系统键盘设置里自定义应用快捷键，打造更适合自己的操作方式。

## 及时停下任务

无论我怎么努力，总有做不完的事情。我曾在第二章介绍了如何用 TaskPaper 开始一天的任务，这里我们来看看怎样结束任务。你可能意想不到，即使刹车也是任务管理重要的一环，这能令你更专注当前的任务，也可以让你睡个好觉。

>人们对于尚未处理完的事情,比已处理完成的事情印象更加深刻。
>
>——蔡加尼克效应(Zeigarnik effect)

### 把任务延后

我习惯在睡前回顾任务，有时能发现几个漏网之鱼，一般我只会把它们顺延到次日，而不会对这些任务念念不忘。其实这就是 `@today` 到 `@tomorrow` 的转换。

你可以用文本替换来做到这一点，但如果你经常需要延后任务，就应当使用脚本，它们可以执行许多批量操作。积少成多节约下来的时间会可观。

【17-脚本菜单】

我们先在菜单栏里添加脚本菜单，以便随时调用。打开系统自带的「脚本编辑器」，在其设置-通用中勾选「在菜单栏里添加脚本菜单」，就会在屏幕右上角看见这个脚本编辑器的标志，点一下在展开菜单里找到 TaskPaper 脚本文件夹。

【18-TaskPaper 脚本文件夹】

把 [这个脚本](https://github.com/BlackwinMin/sspai-sample-script/blob/master/to_tomorrow.scpt) 放进去，然后打开一个 TaskPaper 任务列表，在菜单栏-脚本菜单里点击刚刚添加的脚本（默认在下半部分），就可以转换标签了。

【19-延后任务】

TaskPaper 支持 Javascript 和 AppleScript，我也推荐使用它们——倒不是因为简单，而是可以在菜单栏里直接运行，方便取用。考虑到 taskpaper 文件是纯文本，惯用 Shell、Python 的用户也可以使用自己喜欢的语言。

### 强制打断任务

我列表中多数的任务比较灵活，时间可以弹性调控，但每天会有那么几场固定时间的约会（date），强迫我放下手头的事情。**比如说，约饭。**无论是你的同事、同学还是女友，这些熟人都是很好的约饭对象。有了这个小约定，我就算手头有干的正起劲的活儿，也会出于「面子」而赴约。此外，约早饭还能促使自己早起，所以你看，各种约会其实是很好的时间分界线。

【20-强制打断任务】

如果你使用 TaskMator，可以为这些任务设个提醒。不过我用不上，因为从开饭前十分钟起，饭友就不断骚扰我了——让别人提醒你也是不错的主意 :p。

不过，请不要把约会当成闹钟。还记得滑稽的本源吗？就是你铆足力气抱起一块巨石，却发现它是纸糊的，因此摔了一大跤。同样，不要太寄希望于别人；如果被爽约了，不妨打开 TaskPaper 看看有没有 `@dead` 的任务，把它当成约会对象「干掉」💪。

### 创建一个「回家」任务

你可能因为热爱工作或者为了达成指标而忙个停不下来。不妨换个角度看待任务的结束，把 `- 回家 @today(v)` 作为今日最后一个任务来完成。我则把扫除作为一天的结束，摆好桌椅、整理背包、给设备充上电。何况把它们归位之后，即使想挑灯开工也不忍心破坏这份整齐了。

我在实践中觉得这个方法很有效，作为一个「强迫症」，我是不能忍受一个今日任务挂在那儿没有完成的，而执行它之后，就要停工休息。不过那些原本就从 4:55 盯着手表到 5:00 等着下班的家伙，可能不需要创建这个任务 :D。



---

[^1]: Spotlight 为什么不靠谱、桌面和 Dock 为什么不适合堆放文件，可以看我的[这篇文章](https://sspai.com/post/41284)
[^2]: 官方文档里称此为「值」，便于理解我另作命名
